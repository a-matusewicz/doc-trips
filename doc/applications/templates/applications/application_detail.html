{% extends "db/base.html" %}
{% load links %}
{% load detail_view %}
{% load icons %}
{% load convert %}

{% block content %}

<div class="page-header">
  <h3> Application for {{ application.applicant }} {{ application | edit_link }} </h3>
</div>

{# administrative info #}
<h4> Administrative Info </h4>
<table class="table table-condensed table-striped">
  <tr>
    <td class="col-sm-3 text-right"><strong>Status</strong></td>
    <td> {{ application.status }} </td>
  </tr>
</table>

{# grades #}
<h4> Trip Leader Grades </h4>
<table class="table table-condensed table-striped">
  <tr>
    <th> Grade </th>
    <th> Hard skills </th>
    <th> Soft skills </th>
    <th> Comment </th>
    <th> Grader </th>
  </tr>
  {% for grade in application.leader_supplement.grades.all %}
  <tr>
    <td> {{ grade.grade }} </td>
    <td> {{ grade.hard_skills | ok_if_true }} </td>
    <td> {{ grade.soft_skills | ok_if_true }} </td>
    <td> {{ grade.comment }} </td>
    <td> {{ grade.grader }} </td>
  </tr>
  {% endfor %}
</table>

<h4> Croo Grades </h4>
<table class="table table-condensed table-striped">
  <tr>
    <th> Grade </th>
    <th> Comment </th>
    <th> Grader </th>
  </tr>
  {% for grade in application.croo_supplement.grades.all %}
  <tr>
    <td> {{ grade.grade }} </td>
    <td> {{ grade.comment }} </td>
    <td> {{ grade.grader }} </td>
  </tr>
  {% endfor %}
</table>


{# application body #}
{# TODO: share layout with application_body.html? #}
<h4> Application </h4>
<div role="tabpanel">

  <!-- Nav tabs -->
  <ul class="nav nav-tabs" role="tablist">

    <li role="presentation" class="active">
      <a href="#general" aria-controls="general" role="tab" data-toggle="tab">      
	{{ application | checkmark_if_true }}
	General Information
      </a>
    </li>

    <li role="presentation">
      <a href="#leader" aria-controls="leader" role="tab" data-toggle="tab">
	{{ application.leader_application_complete | checkmark_if_true }}
	Trip Leader Application
      </a>
    </li>

    <li role="presentation">
      <a href="#croo" aria-controls="croo" role="tab" data-toggle="tab">
	{{ application.croo_application_complete | checkmark_if_true }} 
	Croo Application
      </a>
    </li>

  </ul>

    <!-- Tab panes -->
    <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="general">
	<br/>
	<div class="expand-whitespace"><p> {{ information.general_info }} </p></div>
	{% detail application generalapplication_fields %}
      </div>

      <div role="tabpanel" class="tab-pane" id="leader">
	<br/>
	<div class="expand-whitespace"><p> {{ information.leader_info }} </p></div>
	{% detail application.leader_supplement leaderapplication_fields %}
	<div>
	  {% display_docx_filefield_as_html application.leader_supplement.document %}
	</div>
      </div>

      <div role="tabpanel" class="tab-pane" id="croo">
	<br/>
	<div class="expand-whitespace"><p> {{ information.croo_info }} </p></div>
	{% detail application.croo_supplement crooapplication_fields %}
	<div>
	  {% display_docx_filefield_as_html application.croo_supplement.document %}
	</div>
      </div>
      
    </div>

</div>


{% endblock content %}
