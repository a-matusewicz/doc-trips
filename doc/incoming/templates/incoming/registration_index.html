{% extends "db/base.html" %}
{% load links %}

{% block header %}
<h2> <span class="badge"> {{ registrations.count }} </span> Trippee Registrations 

  <a class="btn btn-success" href="{% url 'db:reports:financial_aid' trips_year=trips_year %}">
    <i class="fa fa-download"></i> Financial Aid Requests
  </a>

  <a class="btn btn-success" href="{% url 'db:reports:bus_stops' trips_year=trips_year %}">
    <i class="fa fa-download"></i> External Bus Requests
  </a>

</h2>
{% endblock %}

{% block content %}

{% if unmatched %}
<div class="alert alert-danger alert-dismissible">
 <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true"><i class="fa fa-times"></i></span></button>
  <h4> <i class="fa fa-warning"></i> The following registrations are not matched to Incoming Student data: </h4>
  <ul>
    {% for reg in unmatched %}
    <li> {{ reg|detail_link }} </li>
    {% endfor %}
  </ul>
</div>
{% endif %}

<table class="table table-condensed">
  <tr>
    <th> Registration </th>
    <th> Incoming Student Data </th>
    <th> </th>
  </tr>
  {% for registration in registrations %}
  <tr>
    <td> {{ registration|detail_link }} </td>
    <td> {% if registration.get_incoming_student %} {{ registration.get_incoming_student|detail_link }} {% endif %} </td>
    <td> {{ registration|edit_link }} </td>
  </tr>
  {% endfor %}
</table>

{% endblock content %}
