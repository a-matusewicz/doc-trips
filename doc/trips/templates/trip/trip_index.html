{% extends "db/base.html" %}

{% load links %}

{% block header %}
  <h3> Scheduled Trips </h3>
{% endblock %}

{% block content %}

<div>
  <p> All trips which are scheduled to go out this year. Each Scheduled Trip is identified by a <em>Section</em> and a <em>Trip Template</em>. To schedule a trip, click on the "add" link in the matrix. </p>
</div>

<table class="table table-condensed">

  {% for template, sections in matrix.items %}

  {% if forloop.first %}
  <tr>
    <th>Template</th>
    <th>Type</th>
    {% for section in sections %}
    <th> {{ section.name }} </th>
    {% endfor %}
  </tr>
  {% endif %}
  
  <tr>
    <td> {{ template | detail_link }} </td>
    <td> {{ template.triptype.name }} </td>

    {% for section, trip in sections.items %}
    {% if trip %}
    <td>{{ trip | detail_link }}</td>
    {% else %}
    <td><a href="{% url 'db:trip_create' trips_year=trips_year %}?section={{ section.pk }}&template={{ template.pk }}">add</a></td>
    {% endif %}
    {% endfor %}
  </tr>

  {% endfor %}
</table>

{% endblock %}
