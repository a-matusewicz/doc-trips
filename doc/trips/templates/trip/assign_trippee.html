{% extends "db/base.html" %}
{% load crispy_forms_tags %}
{% load links %}
{% load icons %}

{% block header %}
  <h3> Add Trippee to {{ trip }} <small> {{ trip.template.description_summary }} </small></h3>
{% endblock %}

{% block content %}


<h5> Current Trippees </h5>
<p>
  <ul>
    {% for trippee in trip.trippees.all %}
    <li> {{ trippee|detail_link }} ({{ trippee.registration.gender|default:trippee.gender|lower }} &mdash; {{ trippee.address }}) </li>
    {% endfor %}
  </ul>
</p> 

<h4> Prospective Trippees </h4>

This list shows all trippees who indicated that they first choice, prefer, or are available for {{ trip.template.triptype | detail_link }} and {{ trip.section | detail_link }}. If a trippee requested an external bus, the 'Bus Available' column indicates whether the requested bus is scheduled to run for this section.
<table class="table table-condensed table=striped">
  <tr>
    <th/>
    <th> Gender </th>
    <th> Address </th>
    <th> Trip Assignment </th>
    <th> {{ trip.template.triptype }} </th>
    <th> {{ trip.section }} </th>
    <th> Bus Available? </th>
    <th> Stop Requested </th>
  </tr>
  {% for trippee in available_trippees %}
  <tr>
    <td> {{ trippee|detail_link }} </td>
    <td> {{ trippee.registration.gender|default:trippee.gender|lower }} </td>
    <td> {{ trippee.address }} </td>
    <td> 
      {% if trippee.trip_assignment %}
      {{ trippee.trip_assignment|detail_link }}
      {% else %}
      <a class="btn btn-xs btn-primary" href="{{ trippee.assignment_url }}">
	Assign to {{ trip }}
      </a>
      {% endif %}
    </td>
    <td> {{ trippee.triptype_preference }} </td>
    <td> {{ trippee.section_preference }} </td>
    <td> {{ trippee.bus_available|ok_if_true }} </td>
    <td> {{ trippee.registration.bus_stop|detail_link }} </td>

  {% endfor %}

</table>

{% endblock content %}


