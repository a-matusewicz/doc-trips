{% extends "db/base.html" %}
{% load get from dict %}
{% load links %}

{% block header %}
<h2> Scheduled Transportation </h2>
{% endblock %}

{% block content %}
<p> Each entry in the matrix represents a Scheduled Transport. Click 'add' to schedule a transport. </p> 
<p> Mouseover a block in the matrix to see the number of riders if all trips are maxed out. The matrix will warn you if transportation is not scheduled for a trip. The matrix will also warn you if the trips riding on a bus exceed the capacity of a bus. </p>
<p> TODO: show which trips are riding on each transportation </p>
<table class="table table-condensed table-bordered">
  <tr>
    <th> Route </th>
    {% for date in dates %}
    <th> {{ date|date:"n/j" }} </th>
    {% endfor %}
  </tr>

  {% for route, transport_by_date in matrix.items %}
  <tr> 
    <td> {{ route|detail_link }} </td>
    {% for date in dates %}
    {% with transport=transport_by_date|get:date riders=riders|get:route|get:date capacity=route.vehicle.capacity issue=issues|get:route|get:date %}
    <td> 
      {% include "transport/_transport_detail.html" %}
    </td>
    {% endwith %}
    {% endfor %}
  </tr>
  {% endfor %}
</table>

{% endblock content %}

{% block scripts %}
<script type="text/javascript">
$(function () {
  $('[data-toggle="tooltip"]').tooltip()
})
</script>
{% endblock %}

