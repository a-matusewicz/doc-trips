{% extends "db/base.html" %}
{% load get from dict %}
{% load links %}

{% block header %}
<h2> Scheduled Transportation </h2>
{% endblock %}

{% block content %}
<table class="table table-condensed">
  <tr>
    <th> Route </th>
    {% for date in dates %}
    <th> {{ date|date:"n/j" }} </th>
    {% endfor %}
  </tr>

  {% for route, transport_by_date in matrix.items %}
  <tr> 
    <td> {{ route|detail_link }} </td>
    {% for date in dates %}
    {% with transport=transport_by_date|get:date riders=riders|get:route|get:date %}
    <td> 
      {% if transport %} 
      <span class="bg-error">
	<a class="btn btn-xs btn-warning" href="{% url 'db:scheduledtransport_delete' trips_year=trips_year pk=route.pk %}"> <i class="fa fa-times"></i> del </a>
      {% else %} 
      <a href="{% url 'db:scheduledtransport_create' trips_year=trips_year %}?route={{ route.pk }}&date={{ date|date:'n/j/Y' }}"> add </a> 
      {% endif %} 
      {{ riders }}
    </td>
    {% endwith %}
    {% endfor %}
  </tr>
  {% endfor %}
</table>


{% endblock content %}
