{% load links %}

<ul class="list-group">
  {% for leg in directions.legs %}
  <li class="list-group-item">
    <h4 class="list-group-item-heading"> From {{ leg.start_stop }}: </h4>
  </li>

  {% for step in leg.steps %}
  <li class="list-group-item"> 
    {{ step.html_instructions|safe }} &mdash; {{ step.distance.text }}
  </li>
  {% endfor %}

  <li class="list-group-item">
    <h4 class="list-group-item-heading"> 
      Arrive at {{ leg.end_stop }} 
      {% if leg.end_stop.distance %}
      <small>distance: {{ leg.end_stop.distance }}</small>
      {% endif %}
    </h4> 
    <p> {{ leg.end_stop.directions }} </p>

    {% if leg.end_stop.trips_dropped_off %}
    <p class="h5"> Dropoff {{ leg.end_stop.trips_dropped_off|detail_link }} </p>
    {% endif %}
    
    {% if leg.end_stop.trips_picked_up %}
    <p class="h5"> Pickup {{ leg.end_stop.trips_picked_up|detail_link }} </p>
    {% endif %}
  </li>

  {% endfor %}
</ul>
