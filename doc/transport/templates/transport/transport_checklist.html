{% extends "db/base.html" %}
{% load links %}
{% load maps %}

{% block header %}
<h2> {{ route|detail_link }} <small>{{ date|date:"n/j" }}</small> </h2>
{% endblock %}

{% block content %}

{% include "transport/_scheduled_alert.html" %}

{% if over_capacity %}
<div class="alert alert-danger">
  <i class="fa fa-warning"></i> This bus is over capacity! At some point there are too many passengers on the bus.
</div>
{% endif %}

<div class="row">
<div class="col-sm-6">
{% if dropoffs %}
<h4> Dropping Off </h4>
<ul>
  {% for trip in dropoffs %}
  <li>{{ trip|detail_link }} &mdash; {{ trip.template.dropoff|detail_link }}</li>
  {% endfor %}
</ul>
{% endif %}

{% if pickups %}
<h4> Picking Up </h4>
<ul>
  {% for trip in pickups %}
  <li>{{ trip|detail_link }} &mdash; {{ trip.template.pickup|detail_link }}</li>
  {% endfor %}
</ul>
{% endif %}

{% if returns %}
<h4> Returning to Campus </h4>
<ul>
  {% for trip in returns %}
  <li>{{ trip|detail_link }}</li>
  {% endfor %}
</ul>
{% endif %}

</div>

<div class="col-sm-6">
{% if scheduled %}
{% embed_map stops %}
{% endif %}
</div>

</div>

{% if not scheduled %}
<p class="h4"> Directions are only shown for scheduled buses. </p>
{% endif %}

{% if error %}
<p class="h4"> Maps Error: {{ error }} </p>
{% endif %}

{% include "transport/maps/directions.html" %}

{% endblock %}
